<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <style>
      #div,
      h1 {
        text-align: center;
      }

      #div2 {
        position: relative;
        left: 30%;
      }

      #busca {
        height: 25px;
        width: 150px;
      }

      #consonante,
      #vocal {
        height: 25px;
        width: 80px;
      }
    </style>
  </head>

  <body>
    <h1>Juego de letras</h1>
    <div id="div">
      <button id="consonante">consonante</button>
      <button id="vocal">vocal</button>
      <br />
      <input type="text" />
      <br />
      <button id="busca">buscar soluciones</button>
    </div>
    <div id="div2"></div>
  </body>

  <script>
    fetch("dic.txt")
      .then((d) => d.text())
      .then((palabras) => {
        let words = palabras.split(/\n|\s/);
        let ray = [];
        for (i in words) {
          if (words[i] != "") {
            ray.push(words[i].toUpperCase());
          }
        }

        let consonante = "B,C,D,F,G,H,J,K,L,M,N,Ã‘,P,Q,R,S,T,V,X,Z,W,Y";
        consonante = consonante.split(/,/);

        let vocales = "A,E,I,O,U";
        vocales = vocales.split(/,/);

        let div2 = document.getElementById("div2");

        let conBtn = document.querySelector("#consonante");
        let vocBtn = document.querySelector("#vocal");
        let box = document.querySelector("input");
        let buscar = document.querySelector("#busca");
        let div2Text = document.querySelector("#div2");

        let deNletras = [];
        let cont = 9;
        while (cont > 2) {
          deNletras[cont] = `De ${cont} letras: `;

          cont--;
        }

        function allIn(word1, word2) {
          let x = 0;

          const allIncluded = word2.split("");

          for (letra of word2) {
            if (word1.includes(letra)) {
              let pos = word1.indexOf(letra); // get index of this letra from user input , and store it
              // console.log(pos);
              word1 = word1.slice(0, pos) + word1.slice(pos + 1, word1.length);
              //delete this letra based on its position from userinput

              x++;
            }
          }
          return x == word2.length;
        }

        conBtn.addEventListener("click", function () {
          let randC = Math.floor(Math.random() * consonante.length); // de 0 a 21
          let letra = consonante[randC];
          box.value += letra;
        });

        vocBtn.addEventListener("click", function () {
          let randV = Math.floor(Math.random() * vocales.length);
          let letra = vocales[randV];
          box.value += letra;
        });

        buscar.addEventListener("click", function () {
          let texto = box.value;

          for (let i of ray) {
            if (allIn(texto, i) && i.length > 2) {
              console.log(i);
            }
          }
        });
      });
  </script>
</html>
